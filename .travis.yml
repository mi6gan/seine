language: node_js
node_js: '12'
services: docker
cache: yarn
before_deploy:
- yarn config set version-commit-hooks false
- yarn config set version-git-tag false
- yarn config set version-sign-git-tag false
- echo -e "machine github.com\n  login $CI_USER_LOGIN\n  password $CI_USER_PASSWORD" > ~/.netrc
- echo -e "//registry.npmjs.org/:_authToken=$NPM_TOKEN\n @$NPM_LOGIN:registry=https://registry.npmjs.org/" > ~/.npmrc
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
deploy:
- provider: script
  skip_cleanup: true
  script: yarn release
  on:
    branch: master
- provider: script
  script: yarn deploy
  on:
    branch: master
env:
  global:
  - secure: eY6oIHY5UJk9VXrd2KMUWWe11LUdFcm0JDJ0eO9kNam63z93ml3vSIDpT3OlmZFTkgIq/shF59/3ELRlfNX0KaVXyhgYrIowO1rUGGFnR39O2NPMJpK0bu8PQmNC1jxo4pfC2NW5uC4RT+T0VEkyFkS3FQH38rHsipUIxW4fRXpud1jyKYdB8joDnLsM2zOJcOtebcIuMgIHUSLwsreR0m74XxMLD0LgOaH88ED7kGL/Fl7Qh+GrMD7XRjat7GYk9gVk50+hLWSRF8WdKecysplWbwsa2xUBCSrz+xCdQQEABEVs9Ipi+cVaLOP3iEdqCFt//vTUDkOccX4UTeCJbzRj85tRQ8nKBoaksz1310y/QocntVEFwpuvwKJucaMj3DMaH/HYcKvvIicIrWf1YY0Y1Rny1lgWPYXzBFW1IxosXnGNOP1lG6idCXDME00kEp4R+UtQH4I9cE4IlhbSlO9cRAOd/58ZRY/ZK1fR20S1KnziCD6kkTfmmnBPbpBSjfqE3sjUowHOhzXYk558TOI7KJTAA6kXcSW/1aWzysl8VJ8FQiP2N1mr5YzypY2gUeIL4WeU53vE1fAtyJC2faYJiON3G5NIQTG6U9mJrUSeb9gNYkIh2l/94ouUJw8kFtOTSvVU8aNuiyFK1k5sj+RZKKC+YTojJfVPqXRdoCc=
  - secure: rENOsF0tzNDCcKyZgL42SrVuviH9phE9zU9Z3t7PfEBR0j1vddG407ktf4tKdNHWDUyXTC0mP42V0Igsbi7NhHCm7ZrSb96DDJgA7fyOX3/bb1iQJC2Il/+lRD38nbaquOujny4ZiX+/HhQ/UxmJgJfeyrPoZgSs1QmxoIAmo8QByNYsLn7OkaiVZypdq3U4dkkiyICxW8KryS89IZpkmhNRsPadxiW9HBIfrn7FpeRnXMxvrAlWQLXYa4ZfJxl7nTSd32hRohEvyLpBAOGUs8fDK53JxqaYf4kYE9eKJLZUEcpzXa67m2WFPFg8pF8mDBnnvGUbRWSZ1CQYtHyau+9Bt3ukg5We5TnFNrtOjg67ynPX8zEWIydcXs88xFuuQFijUlB8nantyYb9VnjatxO2W5YgDx9VJX9xp5+AXOAnPyl3JRh+CK0Jhi/L3/A+FeMDELzRgWHlP4JEvFwpP72abR9niy+ugOcwqxj2F93YyUGILUvoyJL+MozhL+NTi/PGvIl9qkuNIX/IeSFpV4v/Jay8KihiL8Rtd6AMdHTDrygSTG1tw2sWRxMI4SPYwY3yalFbfgyiSbqNhmtP5ckfjAAFxiDOPVpmMWEGZaQ2mZUWqRYGtFBJla6RmTK+bWcmeiFF+L+c414FGNw0sfFK+SRnvcc3RlCuoWKXDOg=
  - secure: F+bPQGVLhI583fUFV0O0CLzMT2Do+y+cKU/WATithDKJiz5t/e/Nqz4vaZj54j5i6Xgca8h6KHTOVMt1tBobTGlZcsOn8dnaMwrzR6No752ziFEqyneuzFbERyvKpzMdOa5TOf4P0aeFu+XrhEDCmCxw3JlyfK8A5kycuZCZfOWaL7ke8tFILr5KsxHibZxoyioeKozWdBkTwPhsFOKPKslxix3vz5rQVlQVCR57aPxblP5HpTMkukXvREIaQlPxAyD5wvpToWGc7BLrQzDeidCn2ckkarMml9A5YRp4JkwiFDdCSn8uTzcjaCNrWDWgZli1mtxXZHoZvYxYRo3x2sFocW03g4HGvvzuoX1LuLYfIq3daogkN+7bSPb5dvAamRrVOOKds9S9Gbsh2VGgXcgR+S8eKJf9briQ+BYDHkWh/pd66xhwJY46C/9MvUrYm+fjFpv68sg+4sFFNC3Bw+jtmH++76BlcOM3TsQZGr7J9O52u8BhYesvHbyjHqocIG9FPeNDFhNHcSF6t9BwFEw8Y7XSfuRi7hW/LmzLChgB/uyNUCdSJVKw7Ppk+xnoidRP0tc4f+BmsLiojkPu5FLJTqFezAf6/IpHQ9V4FvCk4j+oAqzdSTqpNSPTuckQtVdtYTAHG1Mb9f8NdfmB8aw958OAX/GPU1NHgd0bmuM=
  - secure: AF95BOAHlobDZL4MlcFjw695nJ4eqRB/8lyV2Af6V2uzWJ0Zj05uX5VDXQyQ3J5VX/UP/uH+6Rt1186vsdhmaxS/j3cXvpG+qgaybKXRCDZPkIkvm6ywbIzKRMqDvA5ftCWZhtanfCYTEpEAxSEn4bFml0KO/gyGtxrkjo9AQ4Y2VdefgjTn09ikIx1k2bNwi3qzDZccGWAAsdwMSpgJZYwZkWiw0HybaDJyrGqrpHXbDk1kkM7aWPnIqkVWVp8TKrLkwipjMNqR9QHg+KxsIvXVNBX1K6x+Hm57p1rK8gZqvxgWthMTEVUQ9zh94w8reYJXiJpgfTlwmOgyP8JlY02PZhOaLu7E+9acCrv0EuXwGiB5T0D3BvHF663OrHKHBtPjkNLQBzLu3rvu/Zkv9duMEZVh+7sHlIklyiAovr5m4JUYo3+g2oUUBU1GCT5uF5kyTR3o3NxZRj+HT1IMN9mMDeTPw2ueY3/NB5lkrYVPcPULbUMGAuF0euXiuKUiirNYfn4HJssguq0LQaKISBS0tpHfoUl+ddcdak6X9hYm3m42qMvCLpm/rKBa4KAn6vq+YaJwlZ/776OGysNNawvXgEKQfRwC7o+dc5muVHWQUuy18xB61xNWX0v6eR9uB6p6K7nW6Us3G3w41dXvEV8swCVonLs0oTtcFsMpzBo=
  - secure: sX0HXYkSyuQDHPZW7fNSuvPhCRWjz+A6BHGj8ih1Udvy46X05xY3uOjgqwZOBPO1/oWkIUhALOS3CtXp+3Q5KMUOi3vKjknfvyiZaTZZ7Ft/JdI4LzD4zsYaay9ptvjzrKYqXyHUHngYlub1MwVxX1dsD7pyBuxcCAQ6RY4NlOgP01IYZEqNgrZOgaHTrOrAn3xJxIG8MszHdyVq1o3dX2nkssN7gQibAuXUHEYyM6yyyvMWAjZFhjxdFd3k38PGsMT5E9T2ylxoFlteYGA1ukoEfoig2kFZaaF2Q6dBxHZaUDi/F5FHXi9BgbqsYUmpqOFIB1WdpnTbhpegCJPGTuDeX2mw8zLlkqbYXBu+ZckFuI2lda6jRrh62u4uq79i8u/l0HGAWHqWDavhwAEEQnWnSe3GFCv/rr6qwZ9vao5E7zFbXOmWJntAZoJPl4o4IN3ZnN1lOfmjzUja+pvcS794LOhKZB5BOYrlyDkdxe9fpR+PK5Eba7vCxjnsxuE1/Tpt5y6D9WTrSxJrmgOUPRz81WUv+X9qyyBoyhlP+0Kziw0gZXKNt3gTWKPg06X325uYF/ZTx2r54DNAuBrjynna3gbRI8Jcp9LNu/UP07bwi4cbi2Y2b6fPiZPTSGk62vDTsy0JP6+W5GI362YPwz/RvwAkn77aH6o60AXfk3s=
  - secure: iNrBWhPgRX3VoDilMJnHjBBx6QvtuDtiVsYfLJ3XPHZHwWPTeGRhgUaP2LQ9Pwp3FAe/b1M2L4xGaEDXIYODfAaZXdFm3ReIVPpfyEElmQv8BI8VcDabeGvb0+zLZXR6jWAVCu+t+53DL78U8KY0VOvhCwKLPkI1+oetBasAWRSTlxHqb93+a5gK34KXkpEvmkmEQPZZ14qj6xYGszAiy9dokcSwvmT9dyzfGQPQ+0n5liehe2NOb0iKlociUAo3vdGV6OXzxoWwiVmVbGi+jtZB17jl16kpc7H1iHc5WRX0MYhuZB9nK19kJnl+cK/q7NElEu7bEY9fbBMVXfuPtrn0Bk3i9CXauwuXi2eJp/IwyTW6Xrc/HQDS4bz041ai3zvia88Maq4WjtrgprxipCyLa44hw3eU/KpGXjazV88Yzi+nK8d2dbHza+xlQ+22u+nDhY2g/KEf5KOMhPvDSCc1ZJDHv4XobdpuOdgWmOBs1SBepNj+Psndw3bpo0/etYoIIsK0mLpg1/2oq7uPdi3rRH1UM2h5AuuGmrUoQ8tDZxnftyw5ZlUEPhzrIrwV3ZYdT01QcIDq+syhCUqbUtfExvp6xGZk21qNuJ4zU1eAvxTX4CnRyNv/IgeZNugVz7LgUhHeEV0rDbR17k6X4WZHt4vYPnGmNAm5MfiCkr8=
