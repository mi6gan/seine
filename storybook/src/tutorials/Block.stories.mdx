import { Canvas, Story } from '@storybook/addon-docs/blocks';
import { blockTypes, chartTypes, CREATE_BLOCK } from '@seine/core';
import { linkTo } from '@storybook/addon-links';
import Tutorial from './Tutorial';
import Meta from './TutorialMeta';
import { rootBlock, richTextBlock, tableBlock } from '../data/tutorial';

<Meta title={'Tutorials/Block'} />

<Canvas>
  <Story name="Introduction">
    <Tutorial
      scenario={[
        {
          anchor: '#introduction',
          tooltip: (
            <>
              Editor content is based on blocks tree structure.
              <br />
              Let's try to create some blocks.
            </>
          ),
          next: linkTo('Tutorials/Block', 'Text'),
        },
      ]}
      blocks={[rootBlock]}
    />
  </Story>
  <Story name="Text">
    {() => (
      <Tutorial
        scenario={[
          {
            anchor: `tree-item#${rootBlock.id}`,
            tooltip: 'Select your empty document root in tree view',
          },
          {
            anchor: `action-button#${CREATE_BLOCK}(type=${blockTypes.RICH_TEXT}&kind=null)`,
            tooltip: 'Click on text toolbar button',
          },
          {
            anchor: `block#${blockTypes.RICH_TEXT}`,
            tooltip:
              'This is a new block of text. Its content is editable. Select some text.',
          },
          {
            anchor: `design#toggle(name=header)`,
            tooltip: 'Click to format text as heading.',
            value: 'header-one',
            next: linkTo('Tutorials/Block', 'Table'),
          },
        ]}
        blocks={[rootBlock]}
      />
    )}
  </Story>
  <Story name="Table">
    {() => (
      <Tutorial
        scenario={[
          {
            anchor: `tree-item#${rootBlock.id}`,
            tooltip: 'Select your document root in tree view',
          },
          {
            anchor: `action-button#${CREATE_BLOCK}(type=${blockTypes.TABLE}&kind=null)`,
            tooltip: 'Click on table toolbar button',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip:
              'This is a new table with editable structure and cells content. Select any cell',
          },
          {
            anchor: `design#action-button(value=add-column-after)`,
            tooltip: 'Click to add new column before current.',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip: 'Column is added',
            duration: 2 * 1000,
          },
          {
            anchor: `design#action-button(value=add-row-after)`,
            tooltip: 'Click to add new row after current.',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip: 'Column is added',
            duration: 2 * 1000,
          },
          {
            anchor: `design#action-button(value=remove-row)`,
            tooltip: 'Click to remove current row.',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip: 'Column is added',
            duration: 2 * 1000,
          },
          {
            anchor: `design#action-button(value=remove-column)`,
            tooltip: 'Click to remove current column.',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip: 'Column is added',
            duration: 2 * 1000,
          },
          {
            anchor: `design#table-design-section-text`,
            tooltip: 'You may format cell using rich text toolbar.',
            next: linkTo('Tutorials/Block', 'Bar chart'),
          },
        ]}
        blocks={[rootBlock, richTextBlock]}
      />
    )}
  </Story>
  <Story name="Bar chart">
    {() => (
      <Tutorial
        scenario={[
          {
            anchor: `tree-item#${rootBlock.id}`,
            tooltip: 'Select your document root in tree view',
          },
          {
            anchor: `action-button#${CREATE_BLOCK}(type=${blockTypes.CHART}&kind=${chartTypes.BAR})`,
            tooltip: 'Click to add bar chart',
          },
          {
            anchor: `block#${blockTypes.CHART}`,
            tooltip:
              'This is a new bar chart. To add chart of other types use corresponding toolbar buttons',
            duration: 1000 * 5,
            next: linkTo('Tutorials/Block', 'Layout'),
          },
        ]}
        blocks={[rootBlock, richTextBlock, tableBlock]}
      />
    )}
  </Story>
  <Story name="Layout">
    {() => (
      <Tutorial
        scenario={[
          {
            anchor: '#layout',
            tooltip: (
              <>
                Each parent block may render children in two modes: flex and
                grid.
                <br />
                Let's those layout strategies.
              </>
            ),
          },
          {
            anchor: `tree-item#${rootBlock.id}`,
            tooltip: 'Select your document root in tree view',
          },
        ]}
        blocks={[rootBlock]}
      />
    )}
  </Story>
</Canvas>
