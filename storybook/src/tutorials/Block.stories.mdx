import { Canvas, Story } from '@storybook/addon-docs/blocks';
import { blockTypes, chartTypes, CREATE_BLOCK } from '@seine/core';
import { linkTo } from '@storybook/addon-links';
import Tutorial from './Tutorial';
import Meta from './TutorialMeta';
import { rootBlock, richTextBlock, tableBlock } from '../data/tutorial';

<Meta title={'Tutorials/Block'} />

<Canvas>
  <Story name="Introduction">
    <Tutorial
      scenario={[
        {
          anchor: '#introduction',
          tooltip: (
            <>
              Editor content is based on blocks tree structure.
              <br />
              Let's try to create some blocks.
            </>
          ),
          next: linkTo('Tutorials/Block', 'Text'),
        },
      ]}
      blocks={[rootBlock]}
    />
  </Story>
  <Story name="Text">
    {() => (
      <Tutorial
        scenario={[
          {
            anchor: `tree-item#${rootBlock.id}`,
            tooltip: 'Select your empty document root in tree view',
          },
          {
            anchor: `action-button#${CREATE_BLOCK}(type=${blockTypes.RICH_TEXT}&kind=null)`,
            tooltip: 'Click on text toolbar button',
          },
          {
            anchor: `block#${blockTypes.RICH_TEXT}`,
            tooltip:
              'This is a new block of text. Its content is editable. Select some text.',
          },
          {
            anchor: `design#rich-text-section`,
            tooltip:
              'Try to type a text and format it using following toolbar.',
            showNext: true,
            next: linkTo('Tutorials/Block', 'Table'),
          },
        ]}
        blocks={[rootBlock]}
      />
    )}
  </Story>
  <Story name="Table">
    {() => (
      <Tutorial
        scenario={[
          {
            anchor: `tree-item#${rootBlock.id}`,
            tooltip: 'Select your document root in tree view',
          },
          {
            anchor: `action-button#${CREATE_BLOCK}(type=${blockTypes.TABLE}&kind=null)`,
            tooltip: 'Click on table toolbar button',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip:
              'This is a new table with editable structure and cells content. Select any cell',
          },
          {
            anchor: `design#action-button(value=add-column-before)`,
            tooltip: 'Click to add new column before current.',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip: 'Column added',
            duration: 2 * 1000,
          },
          {
            anchor: `design#action-button(value=add-row-after)`,
            tooltip: 'Click to add new row after current.',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip: 'Row added',
            duration: 2 * 1000,
          },
          {
            anchor: `design#action-button(value=remove-row)`,
            tooltip: 'Click to remove current row.',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip: 'Row removed',
            duration: 2 * 1000,
          },
          {
            anchor: `design#action-button(value=remove-column)`,
            tooltip: 'Click to remove current column.',
          },
          {
            anchor: `block#${blockTypes.TABLE}`,
            tooltip: 'Column removed',
            duration: 2 * 1000,
          },
          {
            anchor: `design#table-design-section-text`,
            tooltip: 'You may format cell using rich text toolbar.',
            next: linkTo('Tutorials/Block', 'Bar chart'),
          },
        ]}
        blocks={[rootBlock, richTextBlock]}
      />
    )}
  </Story>
  <Story name="Layout">
    {() => (
      <Tutorial
        scenario={[
          {
            anchor: '#layout',
            tooltip: (
              <>
                Each parent block may render children in two modes: flex and
                grid.
                <br />
                Let's those layout strategies.
              </>
            ),
          },
          {
            anchor: `tree-item#${rootBlock.id}`,
            tooltip: 'Select layout block in tree view.',
          },
          {
            anchor: `design#layout-section-layout`,
            tooltip: (
              <>
                This is layout toolbar. Like in CSS there is two types of auto
                layout display modes:
                <a
                  target={'_blank'}
                  href={
                    'https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout'
                  }
                >
                  flex
                </a> and <a
                  target={'_blank'}
                  href={
                    'https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Basic_Concepts_of_Grid_Layout'
                  }
                >
                  grid
                </a>. By default, grid is used.
              </>
            ),
            placement: 'right',
            showNext: true,
          },
          {
            anchor: `design#input(name=column-gap)`,
            tooltip:
              'You may change horizontal spacing (gap) between layout items.',
            showNext: true,
          },
          {
            anchor: `design#input(name=row-gap)`,
            tooltip: 'And vertical spacing (gap) too.',
            showNext: true,
          },
          {
            anchor: `design#select(name=minSize.units)`,
            tooltip: 'Select pixels to use as cell size constraint unit',
            value: 'px',
          },
          {
            anchor: `design#input(name=minSize.value)`,
            tooltip:
              'This value corresponds to the minimum width of grid column. Set it to 900px',
            value: '900',
          },
          {
            anchor: '#layout',
            tooltip: (
              <>
                Second grid cell is wrapped to the new row. <br />
                It happens because 900px does not fit in parent container width.
              </>
            ),
          },
          {
            anchor: `design#select(name=maxSize.units)`,
            tooltip: 'Select percentage to use as cell size constraint unit',
            value: '%',
          },
          {
            anchor: `design#input(name=maxSize.value)`,
            tooltip:
              'This value corresponds to the maximum width of grid column. Set it to 50%',
            value: '50',
          },
          {
            anchor: '#layout',
            tooltip: (
              <>
                Setting maximum width to a value allows cells to overflow the
                parent to prevent wrapping to the new row.
              </>
            ),
          },
          {
            anchor: `design#select(name=kind)`,
            tooltip: "Let's Change grid to flex.",
            value: 'flex',
          },
          {
            anchor: `design#input(name=spacing)`,
            tooltip: 'In flex mode horizontal and vertical spacings are equal.',
            showNext: true,
          },
          {
            anchor: '#layout',
            tooltip: (
              <>In flex layout we set constraints for each item individually.</>
            ),
          },
          {
            anchor: `block#${blockTypes.RICH_TEXT}`,
            tooltip: 'Select first flex item',
          },
          {
            anchor: `design#input(name=minWidth.value)`,
            tooltip: 'Set minimum width value to 65%',
            value: '65',
          },
          {
            anchor: '#layout',
            tooltip: (
              <>
                Now first block is guaranteed to take minimum 65% of container
                width
              </>
            ),
          },
          {
            anchor: `design#input(name=minWidth.value)`,
            tooltip: 'Now set it to 5%',
            value: '5',
          },
          {
            anchor: `design#select(name=maxWidth.units)`,
            tooltip: 'Select pixels',
            value: 'px',
          },
          {
            anchor: `design#input(name=maxWidth.value)`,
            tooltip: 'Set maximum width value to 100px',
            value: '100',
          },
          {
            anchor: '#layout',
            tooltip: <>Block width is limited to 100px maximum now</>,
          },
          {
            anchor: `design#select(name=direction)`,
            tooltip: 'Select column to align items from top to bottom',
            value: 'column',
          },
          {
            anchor: `design#toggle(name=wrap)`,
            tooltip: 'Toggle wrap mode on.',
            value: 'wrap',
          },
          {
            anchor: '#layout',
            tooltip: (
              <>
                Now blocks are wrapped to the next row if they do not fit
                container.
              </>
            ),
          },
          {
            anchor: '#layout',
            tooltip: (
              <>
                Now blocks are wrapped to the next row if they do not fit
                container.
              </>
            ),
          },
        ]}
        blocks={[rootBlock, richTextBlock, tableBlock]}
      />
    )}
  </Story>
  <Story name="Bar chart">
    {() => (
      <Tutorial
        scenario={[
          {
            anchor: `tree-item#${rootBlock.id}`,
            tooltip: 'Select your document root in tree view',
          },
          {
            anchor: `action-button#${CREATE_BLOCK}(type=${blockTypes.CHART}&kind=${chartTypes.BAR})`,
            tooltip: 'Click to add bar chart',
          },
          {
            anchor: `block#${blockTypes.CHART}`,
            tooltip:
              'This is a new bar chart. To add chart of other types use corresponding toolbar buttons',
            next: linkTo('Tutorials/Video'),
          },
        ]}
        blocks={[rootBlock, richTextBlock, tableBlock]}
      />
    )}
  </Story>
</Canvas>
